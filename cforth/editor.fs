( SCREEN 1 -- EDITOR [1 of 1] A very terse line editor )       
: EDITOR ;
DECIMAL 
VARIABLE EDLINE 64 ALLOT 
VARIABLE EDLINEPTR
EDLINE EDLINEPTR !
: RDLINE ( -- U ) BEGIN 
	KEY DUP 
	EDLINEPTR @
	C! 
	1 EDLINEPTR @ + 
	DUP
	EDLINEPTR ! 
	EDLINE -
	64 > IF ABORT THEN
	13 = UNTIL 
	EDLINEPTR @ EDLINE - 1- 
	EDLINE EDLINEPTR !
;

: LNOFFS 64 * SCREEN @ + ;
: LASTLN 960 SCREEN @ + ;

: REPLACE ( N -- )
	LNOFFS
	EDLINE
	SWAP DUP
	64 32 FILL
	RDLINE
	CMOVE
;

: INSERT ( N -- )
	DUP
	LNOFFS
	DUP 64 +
	ROT DUP
	15 SWAP -
	64 * 
	SWAP >R
	CMOVE
	R>
	REPLACE
;

: ERASE ( N -- )
	LNOFFS
	64 32 FILL
;

: DELETE ( N -- )
	DUP
	LNOFFS
	DUP 64 +
	SWAP ROT
	15 SWAP -
	64 * CMOVE
	15 ERASE
;

: PRINT ( N -- )
	CR
	DUP 3 .R
	58 EMIT
	SPACE
	LNOFFS
	64 TYPE
;

." EDITOR LOADED" CR
